# MTU & MSS

패킷이 쪼개져서 데이터를 송수신하는데 이때의 패킷은 MTU ( Maximum Transmission Unit )를 기반으로 쪼개지게 된다

**MTU** 는 네트워크 통신시 가장 큰 PDU 의 크기를 말한다

**MSS** ( Maximum Segment Size ) 는 TCP 에서 사용할 수 있는 데이터의 크기이자
TCP 헤더, IP 헤더를 뺀 크기를 말한다

예를 들어 터널의 높이 제한을 생각하면 좋다 !

통신을 하는 양쪽 끝은 두 장치의 MTU 만이 아니라 **중간의 모든 라우터, 스위치, 서버를 고려**하며 

네트워크 경로상에 있는 아무 장치나 **MTU 보다 패킷이 크면 분할**될 수 있다

---

하지만 패킷이 분리되지 않는 경우도 존재 한다 !

이 경우 MTU 를 초과하여 분할할 수 없는 경우 아예 전달하지 않을 수도 있다

IPv6 는 분할을 허용하지 않고 IPv4 는 헤더에 flags 라는 필드가 존재하여
bit 가 1이되면 "Dont Fragment" 가 활성화되면서 분할이 불가능해진다

---

# PMTUD

PMTUD (Path MTU Discovery)는 수신자와 송신자의 경로 상에서 장치가 **패킷을 누락한 경우 테스트 패킷의 크기를 낮추면서 MTU 에 맞게끔 반복**해서 보내는 과정이다
